(function(){var A=this,p=A._,g={},e=Array.prototype,m=Object.prototype,j=e.push,h=e.slice,s=e.concat,f=m.toString,B=m.hasOwnProperty,F=e.forEach,q=e.map,u=e.reduce,d=e.reduceRight,n=e.filter,C=e.every,y=e.some,r=e.indexOf,z=e.lastIndexOf,m=Array.isArray,E=Object.keys,D=Function.prototype.bind,a=function(b){if(b instanceof a)return b;if(!(this instanceof a))return new a(b);this._wrapped=b};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=a),exports._=
a):A._=a;a.VERSION="1.5.1";var c=a.each=a.forEach=function(b,k,x){if(null!=b)if(F&&b.forEach===F)b.forEach(k,x);else if(b.length===+b.length)for(var c=0,d=b.length;c<d&&k.call(x,b[c],c,b)!==g;c++);else for(c in b)if(a.has(b,c)&&k.call(x,b[c],c,b)===g)break};a.map=a.collect=function(b,a,x){var d=[];if(null==b)return d;if(q&&b.map===q)return b.map(a,x);c(b,function(b,c,l){d.push(a.call(x,b,c,l))});return d};a.reduce=a.foldl=a.inject=function(b,k,x,d){var l=2<arguments.length;null==b&&(b=[]);if(u&&b.reduce===
u)return d&&(k=a.bind(k,d)),l?b.reduce(k,x):b.reduce(k);c(b,function(b,a,c){l?x=k.call(d,x,b,a,c):(x=b,l=!0)});if(!l)throw new TypeError("Reduce of empty array with no initial value");return x};a.reduceRight=a.foldr=function(b,k,x,l){var v=2<arguments.length;null==b&&(b=[]);if(d&&b.reduceRight===d)return l&&(k=a.bind(k,l)),v?b.reduceRight(k,x):b.reduceRight(k);var f=b.length;if(f!==+f)var e=a.keys(b),f=e.length;c(b,function(a,c,d){c=e?e[--f]:--f;v?x=k.call(l,x,b[c],c,d):(x=b[c],v=!0)});if(!v)throw new TypeError("Reduce of empty array with no initial value");
return x};a.find=a.detect=function(b,a,x){var c;l(b,function(b,d,l){if(a.call(x,b,d,l))return c=b,!0});return c};a.filter=a.select=function(b,a,x){var d=[];if(null==b)return d;if(n&&b.filter===n)return b.filter(a,x);c(b,function(b,c,l){a.call(x,b,c,l)&&d.push(b)});return d};a.reject=function(b,k,c){return a.filter(b,function(b,a,d){return!k.call(c,b,a,d)},c)};a.every=a.all=function(b,k,x){k||(k=a.identity);var d=!0;if(null==b)return d;if(C&&b.every===C)return b.every(k,x);c(b,function(b,a,c){if(!(d=
d&&k.call(x,b,a,c)))return g});return!!d};var l=a.some=a.any=function(b,k,x){k||(k=a.identity);var d=!1;if(null==b)return d;if(y&&b.some===y)return b.some(k,x);c(b,function(b,a,c){if(d||(d=k.call(x,b,a,c)))return g});return!!d};a.contains=a.include=function(b,a){return null==b?!1:r&&b.indexOf===r?-1!=b.indexOf(a):l(b,function(b){return b===a})};a.invoke=function(b,k){var c=h.call(arguments,2),d=a.isFunction(k);return a.map(b,function(b){return(d?k:b[k]).apply(b,c)})};a.pluck=function(b,k){return a.map(b,
function(b){return b[k]})};a.where=function(b,k,c){return a.isEmpty(k)?c?void 0:[]:a[c?"find":"filter"](b,function(b){for(var a in k)if(k[a]!==b[a])return!1;return!0})};a.findWhere=function(b,k){return a.where(b,k,!0)};a.max=function(b,k,x){if(!k&&a.isArray(b)&&b[0]===+b[0]&&65535>b.length)return Math.max.apply(Math,b);if(!k&&a.isEmpty(b))return-Infinity;var d={computed:-Infinity,value:-Infinity};c(b,function(b,a,c){a=k?k.call(x,b,a,c):b;a>d.computed&&(d={value:b,computed:a})});return d.value};a.min=
function(b,k,x){if(!k&&a.isArray(b)&&b[0]===+b[0]&&65535>b.length)return Math.min.apply(Math,b);if(!k&&a.isEmpty(b))return Infinity;var d={computed:Infinity,value:Infinity};c(b,function(b,a,c){a=k?k.call(x,b,a,c):b;a<d.computed&&(d={value:b,computed:a})});return d.value};a.shuffle=function(b){var k,x=0,d=[];c(b,function(b){k=a.random(x++);d[x-1]=d[k];d[k]=b});return d};var v=function(b){return a.isFunction(b)?b:function(a){return a[b]}};a.sortBy=function(b,k,c){var d=v(k);return a.pluck(a.map(b,function(b,
a,k){return{value:b,index:a,criteria:d.call(c,b,a,k)}}).sort(function(b,a){var k=b.criteria,c=a.criteria;if(k!==c){if(k>c||void 0===k)return 1;if(k<c||void 0===c)return-1}return b.index<a.index?-1:1}),"value")};var J=function(b,k,x,d){var l={},f=v(null==k?a.identity:k);c(b,function(a,k){var c=f.call(x,a,k,b);d(l,c,a)});return l};a.groupBy=function(b,k,c){return J(b,k,c,function(b,k,c){(a.has(b,k)?b[k]:b[k]=[]).push(c)})};a.countBy=function(b,k,c){return J(b,k,c,function(b,k){a.has(b,k)||(b[k]=0);
b[k]++})};a.sortedIndex=function(b,k,c,d){c=null==c?a.identity:v(c);k=c.call(d,k);for(var l=0,f=b.length;l<f;){var e=l+f>>>1;c.call(d,b[e])<k?l=e+1:f=e}return l};a.toArray=function(b){return!b?[]:a.isArray(b)?h.call(b):b.length===+b.length?a.map(b,a.identity):a.values(b)};a.size=function(b){return null==b?0:b.length===+b.length?b.length:a.keys(b).length};a.first=a.head=a.take=function(b,a,c){return null==b?void 0:null!=a&&!c?h.call(b,0,a):b[0]};a.initial=function(b,a,c){return h.call(b,0,b.length-
(null==a||c?1:a))};a.last=function(b,a,c){return null==b?void 0:null!=a&&!c?h.call(b,Math.max(b.length-a,0)):b[b.length-1]};a.rest=a.tail=a.drop=function(b,a,c){return h.call(b,null==a||c?1:a)};a.compact=function(b){return a.filter(b,a.identity)};var t=function(b,k,d){if(k&&a.every(b,a.isArray))return s.apply(d,b);c(b,function(b){a.isArray(b)||a.isArguments(b)?k?j.apply(d,b):t(b,k,d):d.push(b)});return d};a.flatten=function(b,a){return t(b,a,[])};a.without=function(b){return a.difference(b,h.call(arguments,
1))};a.uniq=a.unique=function(b,k,d,l){a.isFunction(k)&&(l=d,d=k,k=!1);d=d?a.map(b,d,l):b;var f=[],v=[];c(d,function(c,d){if(k?!d||v[v.length-1]!==c:!a.contains(v,c))v.push(c),f.push(b[d])});return f};a.union=function(){return a.uniq(a.flatten(arguments,!0))};a.intersection=function(b){var c=h.call(arguments,1);return a.filter(a.uniq(b),function(b){return a.every(c,function(c){return 0<=a.indexOf(c,b)})})};a.difference=function(b){var c=s.apply(e,h.call(arguments,1));return a.filter(b,function(b){return!a.contains(c,
b)})};a.zip=function(){for(var b=a.max(a.pluck(arguments,"length").concat(0)),c=Array(b),d=0;d<b;d++)c[d]=a.pluck(arguments,""+d);return c};a.object=function(b,a){if(null==b)return{};for(var c={},d=0,l=b.length;d<l;d++)a?c[b[d]]=a[d]:c[b[d][0]]=b[d][1];return c};a.indexOf=function(b,c,d){if(null==b)return-1;var l=0,f=b.length;if(d)if("number"==typeof d)l=0>d?Math.max(0,f+d):d;else return l=a.sortedIndex(b,c),b[l]===c?l:-1;if(r&&b.indexOf===r)return b.indexOf(c,d);for(;l<f;l++)if(b[l]===c)return l;
return-1};a.lastIndexOf=function(b,a,c){if(null==b)return-1;var d=null!=c;if(z&&b.lastIndexOf===z)return d?b.lastIndexOf(a,c):b.lastIndexOf(a);for(c=d?c:b.length;c--;)if(b[c]===a)return c;return-1};a.range=function(b,a,c){1>=arguments.length&&(a=b||0,b=0);c=arguments[2]||1;for(var d=Math.max(Math.ceil((a-b)/c),0),l=0,f=Array(d);l<d;)f[l++]=b,b+=c;return f};var w=function(){};a.bind=function(b,c){var d,l;if(D&&b.bind===D)return D.apply(b,h.call(arguments,1));if(!a.isFunction(b))throw new TypeError;
d=h.call(arguments,2);return l=function(){if(!(this instanceof l))return b.apply(c,d.concat(h.call(arguments)));w.prototype=b.prototype;var a=new w;w.prototype=null;var f=b.apply(a,d.concat(h.call(arguments)));return Object(f)===f?f:a}};a.partial=function(b){var a=h.call(arguments,1);return function(){return b.apply(this,a.concat(h.call(arguments)))}};a.bindAll=function(b){var d=h.call(arguments,1);if(0===d.length)throw Error("bindAll must be passed function names");c(d,function(c){b[c]=a.bind(b[c],
b)});return b};a.memoize=function(b,c){var d={};c||(c=a.identity);return function(){var l=c.apply(this,arguments);return a.has(d,l)?d[l]:d[l]=b.apply(this,arguments)}};a.delay=function(b,a){var c=h.call(arguments,2);return setTimeout(function(){return b.apply(null,c)},a)};a.defer=function(b){return a.delay.apply(a,[b,1].concat(h.call(arguments,1)))};a.throttle=function(b,a,c){var d,l,f,v=null,e=0;c||(c={});var h=function(){e=!1===c.leading?0:new Date;v=null;f=b.apply(d,l)};return function(){var t=
new Date;!e&&!1===c.leading&&(e=t);var j=a-(t-e);d=this;l=arguments;0>=j?(clearTimeout(v),v=null,e=t,f=b.apply(d,l)):!v&&!1!==c.trailing&&(v=setTimeout(h,j));return f}};a.debounce=function(b,a,c){var d,l=null;return function(){var f=this,v=arguments,e=c&&!l;clearTimeout(l);l=setTimeout(function(){l=null;c||(d=b.apply(f,v))},a);e&&(d=b.apply(f,v));return d}};a.once=function(b){var a=!1,c;return function(){if(a)return c;a=!0;c=b.apply(this,arguments);b=null;return c}};a.wrap=function(b,a){return function(){var c=
[b];j.apply(c,arguments);return a.apply(this,c)}};a.compose=function(){var b=arguments;return function(){for(var a=arguments,c=b.length-1;0<=c;c--)a=[b[c].apply(this,a)];return a[0]}};a.after=function(b,a){return function(){if(1>--b)return a.apply(this,arguments)}};a.keys=E||function(b){if(b!==Object(b))throw new TypeError("Invalid object");var c=[],d;for(d in b)a.has(b,d)&&c.push(d);return c};a.values=function(b){var c=[],d;for(d in b)a.has(b,d)&&c.push(b[d]);return c};a.pairs=function(b){var c=
[],d;for(d in b)a.has(b,d)&&c.push([d,b[d]]);return c};a.invert=function(b){var c={},d;for(d in b)a.has(b,d)&&(c[b[d]]=d);return c};a.functions=a.methods=function(b){var c=[],d;for(d in b)a.isFunction(b[d])&&c.push(d);return c.sort()};a.extend=function(b){c(h.call(arguments,1),function(a){if(a)for(var c in a)b[c]=a[c]});return b};a.pick=function(b){var a={},d=s.apply(e,h.call(arguments,1));c(d,function(c){c in b&&(a[c]=b[c])});return a};a.omit=function(b){var c={},d=s.apply(e,h.call(arguments,1)),
l;for(l in b)a.contains(d,l)||(c[l]=b[l]);return c};a.defaults=function(b){c(h.call(arguments,1),function(a){if(a)for(var c in a)void 0===b[c]&&(b[c]=a[c])});return b};a.clone=function(b){return!a.isObject(b)?b:a.isArray(b)?b.slice():a.extend({},b)};a.tap=function(a,c){c(a);return a};var I=function(b,c,d,l){if(b===c)return 0!==b||1/b==1/c;if(null==b||null==c)return b===c;b instanceof a&&(b=b._wrapped);c instanceof a&&(c=c._wrapped);var v=f.call(b);if(v!=f.call(c))return!1;switch(v){case "[object String]":return b==
String(c);case "[object Number]":return b!=+b?c!=+c:0==b?1/b==1/c:b==+c;case "[object Date]":case "[object Boolean]":return+b==+c;case "[object RegExp]":return b.source==c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if("object"!=typeof b||"object"!=typeof c)return!1;for(var e=d.length;e--;)if(d[e]==b)return l[e]==c;var e=b.constructor,h=c.constructor;if(e!==h&&(!a.isFunction(e)||!(e instanceof e&&a.isFunction(h)&&h instanceof h)))return!1;d.push(b);l.push(c);e=
0;h=!0;if("[object Array]"==v){if(e=b.length,h=e==c.length)for(;e--&&(h=I(b[e],c[e],d,l)););}else{for(var t in b)if(a.has(b,t)&&(e++,!(h=a.has(c,t)&&I(b[t],c[t],d,l))))break;if(h){for(t in c)if(a.has(c,t)&&!e--)break;h=!e}}d.pop();l.pop();return h};a.isEqual=function(a,c){return I(a,c,[],[])};a.isEmpty=function(b){if(null==b)return!0;if(a.isArray(b)||a.isString(b))return 0===b.length;for(var c in b)if(a.has(b,c))return!1;return!0};a.isElement=function(a){return!!(a&&1===a.nodeType)};a.isArray=m||
function(a){return"[object Array]"==f.call(a)};a.isObject=function(a){return a===Object(a)};c("Arguments Function String Number Date RegExp".split(" "),function(b){a["is"+b]=function(a){return f.call(a)=="[object "+b+"]"}});a.isArguments(arguments)||(a.isArguments=function(b){return!(!b||!a.has(b,"callee"))});"function"!==typeof/./&&(a.isFunction=function(a){return"function"===typeof a});a.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};a.isNaN=function(b){return a.isNumber(b)&&b!=
+b};a.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==f.call(a)};a.isNull=function(a){return null===a};a.isUndefined=function(a){return void 0===a};a.has=function(a,c){return B.call(a,c)};a.noConflict=function(){A._=p;return this};a.identity=function(a){return a};a.times=function(a,c,d){for(var l=Array(Math.max(0,a)),f=0;f<a;f++)l[f]=c.call(d,f);return l};a.random=function(a,c){null==c&&(c=a,a=0);return a+Math.floor(Math.random()*(c-a+1))};var H={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",
'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};H.unescape=a.invert(H.escape);var L={escape:RegExp("["+a.keys(H.escape).join("")+"]","g"),unescape:RegExp("("+a.keys(H.unescape).join("|")+")","g")};a.each(["escape","unescape"],function(b){a[b]=function(a){return null==a?"":(""+a).replace(L[b],function(a){return H[b][a]})}});a.result=function(b,c){if(null!=b){var d=b[c];return a.isFunction(d)?d.call(b):d}};a.mixin=function(b){c(a.functions(b),function(c){var d=a[c]=b[c];a.prototype[c]=function(){var b=[this._wrapped];
j.apply(b,arguments);b=d.apply(a,b);return this._chain?a(b).chain():b}})};var N=0;a.uniqueId=function(a){var c=++N+"";return a?a+c:c};a.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\t|\u2028|\u2029/g;a.template=function(b,c,d){var l;d=a.defaults({},d,a.templateSettings);var f=RegExp([(d.escape||P).source,(d.interpolate||P).source,(d.evaluate||
P).source].join("|")+"|$","g"),v=0,e="__p+='";b.replace(f,function(a,c,d,l,f){e+=b.slice(v,f).replace(G,function(a){return"\\"+M[a]});c&&(e+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'");d&&(e+="'+\n((__t=("+d+"))==null?'':__t)+\n'");l&&(e+="';\n"+l+"\n__p+='");v=f+a.length;return a});e+="';\n";d.variable||(e="with(obj||{}){\n"+e+"}\n");e="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+e+"return __p;\n";try{l=new Function(d.variable||"obj","_",e)}catch(h){throw h.source=
e,h;}if(c)return l(c,a);c=function(b){return l.call(this,b,a)};c.source="function("+(d.variable||"obj")+"){\n"+e+"}";return c};a.chain=function(b){return a(b).chain()};a.mixin(a);c("pop push reverse shift sort splice unshift".split(" "),function(b){var c=e[b];a.prototype[b]=function(){var d=this._wrapped;c.apply(d,arguments);("shift"==b||"splice"==b)&&0===d.length&&delete d[0];return this._chain?a(d).chain():d}});c(["concat","join","slice"],function(b){var c=e[b];a.prototype[b]=function(){var b=c.apply(this._wrapped,
arguments);return this._chain?a(b).chain():b}});a.extend(a.prototype,{chain:function(){this._chain=!0;return this},value:function(){return this._wrapped}})}).call(this);var Backbone=Backbone||{};
(function(){var A=[].slice,p=function(e,m,j){var h;e=-1;var g=m.length;switch(j.length){case 0:for(;++e<g;)(h=m[e]).callback.call(h.ctx);break;case 1:for(;++e<g;)(h=m[e]).callback.call(h.ctx,j[0]);break;case 2:for(;++e<g;)(h=m[e]).callback.call(h.ctx,j[0],j[1]);break;case 3:for(;++e<g;)(h=m[e]).callback.call(h.ctx,j[0],j[1],j[2]);break;default:for(;++e<g;)(h=m[e]).callback.apply(h.ctx,j)}},g=Backbone.Events={on:function(e,g,j){this._events||(this._events={});(this._events[e]||(this._events[e]=[])).push({callback:g,
context:j,ctx:j||this});return this},once:function(e,g,j){var h=this,s=_.once(function(){h.off(e,s);g.apply(this,arguments)});s._callback=g;this.on(e,s,j);return this},off:function(e,g,j){var h,s,f,B,p,q,u,d;if(!this._events)return this;if(!e&&!g&&!j)return this._events={},this;B=e?[e]:_.keys(this._events);p=0;for(q=B.length;p<q;p++)if(e=B[p],h=this._events[e]){f=[];if(g||j){u=0;for(d=h.length;u<d;u++)s=h[u],(g&&g!==(s.callback._callback||s.callback)||j&&j!==s.context)&&f.push(s)}this._events[e]=
f}return this},trigger:function(e){if(!this._events)return this;var g=A.call(arguments,1),j=this._events[e],h=this._events.all;j&&p(this,j,g);h&&p(this,h,arguments);return this},listenTo:function(e,g,j){var h=this._listeners||(this._listeners={}),s=e._listenerId||(e._listenerId=_.uniqueId("l"));h[s]=e;e.on(g,j||this,this);return this},stopListening:function(e,g,j){var h=this._listeners;if(h){if(e)e.off(g,j,this),!g&&!j&&delete h[e._listenerId];else{for(var s in h)h[s].off(null,null,this);this._listeners=
{}}return this}}};g.bind=g.on;g.unbind=g.off;"undefined"!==typeof exports&&("undefined"!==typeof module&&module.exports&&(exports=module.exports=g),exports.Backbone=exports.Backbone||Backbone)})();(function(){function A(e){var h=(new Date).getTime(),s=Math.max(0,16-(h-g)),f=p.setTimeout(function(){e(h+s)},s);g=h+s;return f}var p=this,g=0,e=["ms","moz","webkit","o"];if("undefined"!==typeof exports)"undefined"!==typeof module&&module.exports&&(exports=module.exports=A),exports.requestAnimationFrame=A;else{for(var m=0;m<e.length&&!p.requestAnimationFrame;++m)p.requestAnimationFrame=p[e[m]+"RequestAnimationFrame"],p.cancelAnimationFrame=p[e[m]+"CancelAnimationFrame"]||p[e[m]+"CancelRequestAnimationFrame"];
p.requestAnimationFrame||(p.requestAnimationFrame=A);p.cancelAnimationFrame||(p.cancelAnimationFrame=function(e){clearTimeout(e)})}})();(function(){function A(){var a=document.body.getBoundingClientRect(),c=this.width=a.width,a=this.height=a.height;this.renderer.setSize(c,a,this.ratio);this.trigger(d.Events.resize,c,a)}var p=this,g=p.Two||{},e=Math.sin,m=Math.cos,j=Math.atan2,h=Math.sqrt,s=Math.PI,f=2*s,B=s/2,F=Math.pow,q=0,u={hasEventListeners:_.isFunction(p.addEventListener),bind:function(a,c,d,e){this.hasEventListeners?a.addEventListener(c,d,!!e):a.attachEvent("on"+c,d);return this},unbind:function(a,c,d,e){this.hasEventListeners?
a.removeEventListeners(c,d,!!e):a.detachEvent("on"+c,d);return this}},d=p.Two=function(a){a=_.defaults(a||{},{fullscreen:!1,width:640,height:480,type:d.Types.svg,autostart:!1});_.each(a,function(a,d){"fullscreen"===d||("width"===d||"height"===d||"autostart"===d)||(this[d]=a)},this);_.isElement(a.domElement)&&(this.type=d.Types[a.domElement.tagName.toLowerCase()]);this.renderer=new d[this.type](this);d.Utils.setPlaying.call(this,a.autostart);this.frameCount=0;a.fullscreen?(a=_.bind(A,this),_.extend(document.body.style,
{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),_.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),u.bind(p,"resize",a),a()):_.isElement(a.domElement)||(this.renderer.setSize(a.width,a.height,this.ratio),this.width=a.width,this.height=a.height);this.scene=this.renderer.scene;d.Instances.push(this)};_.extend(d,{Array:p.Float32Array||Array,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},
Version:"v0.4.0",Identifier:"two-",Properties:{hierarchy:"hierarchy",demotion:"demotion"},Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert"},Commands:{move:"M",line:"L",curve:"C",close:"Z"},Resolution:8,Instances:[],noConflict:function(){p.Two=g;return this},uniqueId:function(){var a=q;q++;return a},Utils:{release:function(a){_.isObject(a)&&(_.isFunction(a.unbind)&&a.unbind(),a.vertices&&(_.isFunction(a.vertices.unbind)&&
a.vertices.unbind(),_.each(a.vertices,function(a){_.isFunction(a.unbind)&&a.unbind()})),a.children&&_.each(a.children,function(a){d.Utils.release(a)}))},Curve:{CollinearityEpsilon:F(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:0.25,angle:0,epsilon:0.01}},devicePixelRatio:p.devicePixelRatio||1,getBackingStoreRatio:function(a){return a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1},getRatio:function(a){return d.Utils.devicePixelRatio/
E(a)},setPlaying:function(a){this.playing=!!a;return this},getComputedMatrix:function(a,c){var l=[];c=c&&c.identity()||new d.Matrix;for(var e=a;e&&e._matrix;)l.push(e._matrix),e=e.parent;l.reverse();_.each(l,function(a){a=a.elements;c.multiply(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9])});return c},applySvgAttributes:function(a,c){_.each(a.attributes,function(a){switch(a.nodeName){case "visibility":c.visible=!!a.nodeValue;break;case "stroke-linecap":c.cap=a.nodeValue;break;case "stroke-linejoin":c.join=
a.nodeValue;break;case "stroke-miterlimit":c.miter=a.nodeValue;break;case "stroke-width":c.linewidth=parseFloat(a.nodeValue);break;case "stroke-opacity":case "fill-opacity":case "opacity":c.opacity=a.nodeValue;break;case "fill":c.fill=a.nodeValue;break;case "stroke":c.stroke=a.nodeValue;break;case "id":c.id=a.nodeValue}});return c},read:{svg:function(){return d.Utils.read.g.apply(this,arguments)},g:function(a){var c=new d.Group;this.add(c);_.each(a.childNodes,function(a){var e=a.nodeName;e&&(e=e.replace(/svg\:/ig,
"").toLowerCase(),e in d.Utils.read&&(a=d.Utils.read[e].call(this,a),c.add(a)))},this);return d.Utils.applySvgAttributes(a,c)},polygon:function(a,c){var l=[];a.getAttribute("points").replace(/([\d\.?]+),([\d\.?]+)/g,function(a,c,e){l.push(new d.Anchor(parseFloat(c),parseFloat(e)))});var e=(new d.Polygon(l,!c)).noStroke();e.fill="black";return d.Utils.applySvgAttributes(a,e)},polyline:function(a){return d.Utils.read.polygon(a,!0)},path:function(a){var c,e,f,h=!1,t=!1,g=a.getAttribute("d").match(/[a-df-z][^a-df-z]*/ig),
j=g.length-1,g=_.flatten(_.map(g,function(a,g){var n,s,m=a[0],G=m.toLowerCase();f=a.slice(1).trim();f=f.replace(/(-?\d+(?:\.\d*)?)[eE]([+\-]?\d+)/g,function(a,b,c){return parseFloat(b)*Math.pow(10,c)});f=f.split(/[\s,]+|(?=\s?[+\-])/);h=m===G;var b,k,r,q;switch(G){case "z":g>=j?t=!0:(s=c.x,n=c.y,n=new d.Anchor(s,n,void 0,void 0,void 0,void 0,d.Commands.close));break;case "m":case "l":s=parseFloat(f[0]);n=parseFloat(f[1]);n=new d.Anchor(s,n,void 0,void 0,void 0,void 0,"m"===G?d.Commands.move:d.Commands.line);
h&&n.addSelf(c);c=n;break;case "h":case "v":s="h"===G?"x":"y";m="x"===s?"y":"x";n=new d.Anchor(void 0,void 0,void 0,void 0,void 0,void 0,d.Commands.line);n[s]=parseFloat(f[0]);n[m]=c[m];h&&(n[s]+=c[s]);c=n;break;case "s":case "c":n=c.x;m=c.y;e||(e=(new d.Vector).copy(c));"c"===G?(b=parseFloat(f[0]),s=parseFloat(f[1]),G=parseFloat(f[2]),k=parseFloat(f[3]),r=parseFloat(f[4]),q=parseFloat(f[5])):(k=d.Utils.getReflection(c,e,h),b=k.x,s=k.y,G=parseFloat(f[0]),k=parseFloat(f[1]),r=parseFloat(f[2]),q=parseFloat(f[3]));
h&&(b+=n,s+=m,G+=n,k+=m,r+=n,q+=m);_.isObject(c.controls)||d.Anchor.AppendCurveProperties(c);c.controls.right.set(b-c.x,s-c.y);c=n=new d.Anchor(r,q,G-r,k-q,void 0,void 0,d.Commands.curve);e=n.controls.left;break;case "t":case "q":n=c.x;m=c.y;e||(e=(new d.Vector).copy(c));e.isZero()?(b=n,s=m):(b=e.x,m=e.y);"q"===G?(G=parseFloat(f[0]),k=parseFloat(f[1]),r=parseFloat(f[1]),q=parseFloat(f[2])):(k=d.Utils.getReflection(c,e,h),G=k.x,k=k.y,r=parseFloat(f[0]),q=parseFloat(f[1]));h&&(b+=n,s+=m,G+=n,k+=m,r+=
n,q+=m);_.isObject(c.controls)||d.Anchor.AppendCurveProperties(c);c.controls.right.set(b-c.x,s-c.y);c=n=new d.Anchor(r,q,G-r,k-q,void 0,void 0,d.Commands.curve);e=n.controls.left;break;case "a":throw new d.Utils.Error("not yet able to interpret Elliptical Arcs.");}return n}));if(!(1>=g.length))return g=_.compact(g),g=(new d.Polygon(g,t,void 0,!0)).noStroke(),g.fill="black",d.Utils.applySvgAttributes(a,g)},circle:function(a){var c=parseFloat(a.getAttribute("cx")),l=parseFloat(a.getAttribute("cy")),
h=parseFloat(a.getAttribute("r")),g=d.Resolution,t=_.map(_.range(g),function(a){var c=a/g*f;a=h*m(c);c=h*e(c);return new d.Anchor(a,c)},this),t=(new d.Polygon(t,!0,!0)).noStroke();t.translation.set(c,l);t.fill="black";return d.Utils.applySvgAttributes(a,t)},ellipse:function(a){var c=parseFloat(a.getAttribute("cx")),l=parseFloat(a.getAttribute("cy")),h=parseFloat(a.getAttribute("rx")),g=parseFloat(a.getAttribute("ry")),t=d.Resolution,n=_.map(_.range(t),function(a){var c=a/t*f;a=h*m(c);c=g*e(c);return new d.Anchor(a,
c)},this),n=(new d.Polygon(n,!0,!0)).noStroke();n.translation.set(c,l);n.fill="black";return d.Utils.applySvgAttributes(a,n)},rect:function(a){var c=parseFloat(a.getAttribute("x")),e=parseFloat(a.getAttribute("y")),f=parseFloat(a.getAttribute("width")),h=parseFloat(a.getAttribute("height")),f=f/2,h=h/2,g=[new d.Anchor(f,h),new d.Anchor(-f,h),new d.Anchor(-f,-h),new d.Anchor(f,-h)],g=(new d.Polygon(g,!0)).noStroke();g.translation.set(c+f,e+h);g.fill="black";return d.Utils.applySvgAttributes(a,g)},
line:function(a){var c=parseFloat(a.getAttribute("x1")),e=parseFloat(a.getAttribute("y1")),f=parseFloat(a.getAttribute("x2")),h=parseFloat(a.getAttribute("y2")),f=(f-c)/2,h=(h-e)/2,g=[new d.Anchor(-f,-h),new d.Anchor(f,h)],g=(new d.Polygon(g)).noFill();g.translation.set(c+f,e+h);return d.Utils.applySvgAttributes(a,g)}},subdivide:function(a,c,e,f,h,g,n,s,j){j=j||d.Utils.Curve.RecursionLimit;var m=j+1;return _.map(_.range(0,m),function(j){var r=j/m;j=D(r,a,e,h,n);r=D(r,c,f,g,s);return new d.Anchor(j,
r)})},getPointOnCubicBezier:function(a,c,d,e,f){var h=1-a;return h*h*h*c+3*h*h*a*d+3*h*a*a*e+a*a*a*f},getCurveFromPoints:function(a,c){for(var e=a.length,f=e-1,h=0;h<e;h++){var g=a[h];_.isObject(g.controls)||d.Anchor.AppendCurveProperties(g);var n=c?z(h-1,e):Math.max(h-1,0),j=c?z(h+1,e):Math.min(h+1,f);r(a[n],g,a[j]);g._command=0===h?d.Commands.move:d.Commands.curve;g.controls.left.x=_.isNumber(g.controls.left.x)?g.controls.left.x:g.x;g.controls.left.y=_.isNumber(g.controls.left.y)?g.controls.left.y:
g.y;g.controls.right.x=_.isNumber(g.controls.right.x)?g.controls.right.x:g.x;g.controls.right.y=_.isNumber(g.controls.right.y)?g.controls.right.y:g.y}},getControlPoints:function(a,c,f){var h=y(a,c),g=y(f,c);a=n(a,c);f=n(f,c);var j=(h+g)/2;c.u=_.isObject(c.controls.left)?c.controls.left:new d.Vector(0,0);c.v=_.isObject(c.controls.right)?c.controls.right:new d.Vector(0,0);a*=0.33;f*=0.33;j=g<h?j+B:j-B;c.controls.left.x=m(j)*a;c.controls.left.y=e(j)*a;j-=s;c.controls.right.x=m(j)*f;c.controls.right.y=
e(j)*f;c._relative||(c.controls.left.x+=c.x,c.controls.left.y+=c.y,c.controls.right.x+=c.x,c.controls.right.y+=c.y);return c},getReflection:function(a,c,f){var e=c.distanceTo(d.Vector.zero);c=y(d.Vector.zero,c);return new d.Vector(e*Math.cos(c)+(f?0:a.x),e*Math.sin(c)+(f?0:a.y))},angleBetween:function(a,c){var d,f;if(4<=arguments.length)return d=arguments[0]-arguments[2],f=arguments[1]-arguments[3],j(f,d);d=a.x-c.x;f=a.y-c.y;return j(f,d)},distanceBetweenSquared:function(a,c){var d=a.x-c.x,f=a.y-
c.y;return d*d+f*f},distanceBetween:function(a,c){return h(C(a,c))},mod:function(a,c){for(;0>a;)a+=c;return a%c},Collection:function(){Array.call(this);1<arguments.length?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])},Error:function(a){this.name="two.js";this.message=a}}});d.Utils.Error.prototype=Error();d.Utils.Error.prototype.constructor=d.Utils.Error;d.Utils.Collection.prototype=[];d.Utils.Collection.constructor=
d.Utils.Collection;_.extend(d.Utils.Collection.prototype,Backbone.Events,{pop:function(){var a=Array.prototype.pop.apply(this,arguments);this.trigger(d.Events.remove,[a]);return a},shift:function(){var a=Array.prototype.shift.apply(this,arguments);this.trigger(d.Events.remove,[a]);return a},push:function(){var a=Array.prototype.push.apply(this,arguments);this.trigger(d.Events.insert,arguments);return a},unshift:function(){var a=Array.prototype.unshift.apply(this,arguments);this.trigger(d.Events.insert,
arguments);return a},splice:function(){var a=Array.prototype.splice.apply(this,arguments),c;this.trigger(d.Events.remove,a);2<arguments.length&&(c=this.slice(arguments[0],arguments.length-2),this.trigger(d.Events.insert,c));return a}});var n=d.Utils.distanceBetween,C=d.Utils.distanceBetweenSquared,y=d.Utils.angleBetween,r=d.Utils.getControlPoints,z=d.Utils.mod,E=d.Utils.getBackingStoreRatio,D=d.Utils.getPointOnCubicBezier;_.extend(d.prototype,Backbone.Events,{appendTo:function(a){a.appendChild(this.renderer.domElement);
return this},play:function(){d.Utils.setPlaying.call(this,!0);return this.trigger(d.Events.play)},pause:function(){this.playing=!1;return this.trigger(d.Events.pause)},update:function(){var a=!!this._lastFrame,c=(p.performance&&p.performance.now?p.performance:Date).now();this.frameCount++;a&&(this.timeDelta=parseFloat((c-this._lastFrame).toFixed(3)));this._lastFrame=c;var a=this.width,c=this.height,f=this.renderer;(a!==f.width||c!==f.height)&&f.setSize(a,c,this.ratio);this.trigger(d.Events.update,
this.frameCount,this.timeDelta);return this.render()},render:function(){this.renderer.render();return this.trigger(d.Events.render,this.frameCount)},add:function(a){var c=a;_.isArray(a)||(c=_.toArray(arguments));this.scene.add(c);return this},remove:function(a){var c=a;_.isArray(a)||(c=_.toArray(arguments));this.scene.remove(c);return this},clear:function(){this.scene.remove(_.toArray(this.scene.children));return this},makeLine:function(a,c,f,e){f=(f-a)/2;e=(e-c)/2;var h=[new d.Anchor(-f,-e),new d.Anchor(f,
e)],h=(new d.Polygon(h)).noFill();h.translation.set(a+f,c+e);this.scene.add(h);return h},makeRectangle:function(a,c,f,e){f/=2;e/=2;e=[new d.Anchor(-f,-e),new d.Anchor(f,-e),new d.Anchor(f,e),new d.Anchor(-f,e)];e=new d.Polygon(e,!0);e.translation.set(a,c);this.scene.add(e);return e},makeCircle:function(a,c,d){return this.makeEllipse(a,c,d,d)},makeEllipse:function(a,c,h,g){var n=d.Resolution,j=_.map(_.range(n),function(a){var c=a/n*f;a=h*m(c);c=g*e(c);return new d.Anchor(a,c)},this),j=new d.Polygon(j,
!0,!0);j.translation.set(a,c);this.scene.add(j);return j},makeCurve:function(a){var c=arguments.length,f=a;if(!_.isArray(a))for(var f=[],e=0;e<c;e+=2){var h=arguments[e];if(!_.isNumber(h))break;f.push(new d.Anchor(h,arguments[e+1]))}var c=arguments[c-1],f=new d.Polygon(f,!(_.isBoolean(c)&&c),!0),c=f.getBoundingClientRect(),g=c.left+c.width/2,n=c.top+c.height/2;_.each(f.vertices,function(a){a.x-=g;a.y-=n});f.translation.set(g,n);this.scene.add(f);return f},makePolygon:function(a){var c=arguments.length,
f=a;if(!_.isArray(a))for(var f=[],e=0;e<c;e+=2){var h=arguments[e];if(!_.isNumber(h))break;f.push(new d.Anchor(h,arguments[e+1]))}c=arguments[c-1];f=new d.Polygon(f,!(_.isBoolean(c)&&c));c=f.getBoundingClientRect();f.center().translation.set(c.left+c.width/2,c.top+c.height/2);this.scene.add(f);return f},makeGroup:function(a){var c=a;_.isArray(a)||(c=_.toArray(arguments));var f=new d.Group;this.scene.add(f);f.add(c);return f},interpret:function(a){var c=a.tagName.toLowerCase();if(!(c in d.Utils.read))return null;
a=d.Utils.read[c].call(this,a);this.add(a);return a}});(function(){requestAnimationFrame(arguments.callee);_.each(d.Instances,function(a){a.playing&&a.update()})})();"function"===typeof define&&define.amd?define(function(){return d}):"undefined"!=typeof module&&module.exports&&(module.exports=d)})();(function(){var A,p,g,e,m=Two.Vector=function(f,e){this.x=f||0;this.y=e||0};_.extend(m,{zero:new Two.Vector});_.extend(m.prototype,Backbone.Events,{set:function(f,e){this.x=f;this.y=e;return this},copy:function(f){this.x=f.x;this.y=f.y;return this},clear:function(){this.y=this.x=0;return this},clone:function(){return new m(this.x,this.y)},add:function(f,e){this.x=f.x+e.x;this.y=f.y+e.y;return this},addSelf:function(f){this.x+=f.x;this.y+=f.y;return this},sub:function(f,e){this.x=f.x-e.x;this.y=f.y-
e.y;return this},subSelf:function(f){this.x-=f.x;this.y-=f.y;return this},multiplySelf:function(f){this.x*=f.x;this.y*=f.y;return this},multiplyScalar:function(f){this.x*=f;this.y*=f;return this},divideScalar:function(f){f?(this.x/=f,this.y/=f):this.set(0,0);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(f){return this.x*f.x+this.y*f.y},lengthSquared:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},
distanceTo:function(f){return Math.sqrt(this.distanceToSquared(f))},distanceToSquared:function(f){g=this.x-f.x;e=this.y-f.y;return g*g+e*e},setLength:function(f){return this.normalize().multiplyScalar(f)},equals:function(f){return 1E-4>this.distanceTo(f)},lerp:function(f,e){A=(f.x-this.x)*e+this.x;p=(f.y-this.y)*e+this.y;return this.set(A,p)},isZero:function(){return 1E-4>this.length()},toString:function(){return this.x+","+this.y},toObject:function(){return{x:this.x,y:this.y}}});var j={set:function(f,
e){this._x=f;this._y=e;return this.trigger(Two.Events.change)},copy:function(f){this._x=f.x;this._y=f.y;return this.trigger(Two.Events.change)},clear:function(){this._y=this._x=0;return this.trigger(Two.Events.change)},clone:function(){return new m(this._x,this._y)},add:function(f,e){this._x=f.x+e.x;this._y=f.y+e.y;return this.trigger(Two.Events.change)},addSelf:function(f){this._x+=f.x;this._y+=f.y;return this.trigger(Two.Events.change)},sub:function(f,e){this._x=f.x-e.x;this._y=f.y-e.y;return this.trigger(Two.Events.change)},
subSelf:function(f){this._x-=f.x;this._y-=f.y;return this.trigger(Two.Events.change)},multiplySelf:function(f){this._x*=f.x;this._y*=f.y;return this.trigger(Two.Events.change)},multiplyScalar:function(f){this._x*=f;this._y*=f;return this.trigger(Two.Events.change)},divideScalar:function(f){return f?(this._x/=f,this._y/=f,this.trigger(Two.Events.change)):this.clear()},negate:function(){return this.multiplyScalar(-1)},dot:function(f){return this._x*f.x+this._y*f.y},lengthSquared:function(){return this._x*
this._x+this._y*this._y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(f){return Math.sqrt(this.distanceToSquared(f))},distanceToSquared:function(f){g=this._x-f.x;e=this._y-f.y;return g*g+e*e},setLength:function(f){return this.normalize().multiplyScalar(f)},equals:function(f){return 1E-4>this.distanceTo(f)},lerp:function(f,e){A=(f.x-this._x)*e+this._x;p=(f.y-this._y)*e+this._y;return this.set(A,p)},isZero:function(){return 1E-4>
this.length()},toString:function(){return this._x+","+this._y},toObject:function(){return{x:this._x,y:this._y}}},h={get:function(){return this._x},set:function(e){this._x=e;this.trigger(Two.Events.change,"x")}},s={get:function(){return this._y},set:function(e){this._y=e;this.trigger(Two.Events.change,"y")}};Two.Vector.prototype.bind=Two.Vector.prototype.on=function(){this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",h),Object.defineProperty(this,"y",s),_.extend(this,j),this._bound=
!0);Backbone.Events.bind.apply(this,arguments);return this}})();(function(){var A=Two.Commands,p,g,e,m=Two.Anchor=function(e,g,f,j,p,q,u){Two.Vector.call(this,e,g);this._broadcast=_.bind(function(){this.trigger(Two.Events.change)},this);this._command=u||A.move;this._relative=!0;if(!u)return this;m.AppendCurveProperties(this);_.isNumber(f)&&(this.controls.left.x=f);_.isNumber(j)&&(this.controls.left.y=j);_.isNumber(p)&&(this.controls.right.x=p);_.isNumber(q)&&(this.controls.right.y=q)};_.extend(m,{AppendCurveProperties:function(e){e.controls={left:new Two.Vector(0,
0),right:new Two.Vector(0,0)}}});var j={listen:function(){_.isObject(this.controls)||m.AppendCurveProperties(this);_.each(this.controls,function(e){e.bind(Two.Events.change,this._broadcast)},this);return this},ignore:function(){_.each(this.controls,function(e){e.unbind(Two.Events.change,this._broadcast)},this);return this},clone:function(){g=this.controls;e=new Two.Anchor(this.x,this.y,g&&g.left.x,g&&g.left.y,g&&g.right.x,g&&g.right.y,this.command);e.relative=this._relative;return e},toObject:function(){p=
{x:this.x,y:this.y};this._command&&(p.command=this._command);this._relative&&(p.relative=this._relative);this.controls&&(p.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()});return p}};Object.defineProperty(m.prototype,"command",{get:function(){return this._command},set:function(e){this._command=e;this._command===A.curve&&!_.isObject(this.controls)&&m.AppendCurveProperties(this);return this.trigger(Two.Events.change)}});Object.defineProperty(m.prototype,"relative",
{get:function(){return this._relative},set:function(e){if(this._relative==e)return this;this._relative=!!e;return this.trigger(Two.Events.change)}});_.extend(m.prototype,Two.Vector.prototype,j);Two.Anchor.prototype.bind=Two.Anchor.prototype.on=function(){Two.Vector.prototype.bind.apply(this,arguments);_.extend(this,j)};Two.Anchor.prototype.unbind=Two.Anchor.prototype.off=function(){Two.Vector.prototype.unbind.apply(this,arguments);_.extend(this,j)}})();(function(){_.range(6);var A=Math.cos,p=Math.sin,g=Math.tan,e,m,j,h,s,f,B,F,q,u,d,n,C,y,r,z,E,D,a,c,l,v,J,t,w,I,H,L,N,P,M,G,b,k,x,da,O,Q,$,ca,T,U,V,W,X,aa,ba,Y,R,Z=[],ea=Two.Matrix=function(a,b,c,d,e,f){this.elements=new Two.Array(9);var h=a;_.isArray(h)||(h=_.toArray(arguments));this.identity().set(h)};_.extend(ea,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(b,d,f){if(3>=d.length)return n,C,y,e=d[0]||0,m=d[1]||0,j=d[2]||0,s=b,n=s[0]*e+s[1]*m+s[2]*j,C=s[3]*e+s[4]*m+s[5]*j,y=s[6]*e+s[7]*m+s[8]*
j,{x:n,y:C,z:y};r=b[0];z=b[1];E=b[2];D=b[3];a=b[4];c=b[5];l=b[6];v=b[7];J=b[8];t=d[0];w=d[1];I=d[2];H=d[3];L=d[4];N=d[5];P=d[6];M=d[7];G=d[8];f=f||new Two.Array(9);f[0]=r*t+z*H+E*P;f[1]=r*w+z*L+E*M;f[2]=r*I+z*N+E*G;f[3]=D*t+a*H+c*P;f[4]=D*w+a*L+c*M;f[5]=D*I+a*N+c*G;f[6]=l*t+v*H+J*P;f[7]=l*w+v*L+J*M;f[8]=l*I+v*N+J*G;return f}});_.extend(ea.prototype,Backbone.Events,{set:function(a,b,c,e,f,h){d=a;x=arguments.length;_.isArray(d)||(d=_.toArray(arguments));_.each(d,function(a,b){_.isNumber(a)&&(this.elements[b]=
a)},this);return this.trigger(Two.Events.change)},identity:function(){this.set(ea.Identity);return this},multiply:function(e,f,h,g,j,s,m,q,la){d=arguments;x=d.length;if(1>=x)return _.each(this.elements,function(a,b){this.elements[b]=a*e},this),this.trigger(Two.Events.change);if(3>=x)return n,C,y,e=e||0,f=f||0,h=h||0,j=this.elements,n=j[0]*e+j[1]*f+j[2]*h,C=j[3]*e+j[4]*f+j[5]*h,y=j[6]*e+j[7]*f+j[8]*h,{x:n,y:C,z:y};b=this.elements;k=d;r=b[0];z=b[1];E=b[2];D=b[3];a=b[4];c=b[5];l=b[6];v=b[7];J=b[8];t=
k[0];w=k[1];I=k[2];H=k[3];L=k[4];N=k[5];P=k[6];M=k[7];G=k[8];this.elements[0]=r*t+z*H+E*P;this.elements[1]=r*w+z*L+E*M;this.elements[2]=r*I+z*N+E*G;this.elements[3]=D*t+a*H+c*P;this.elements[4]=D*w+a*L+c*M;this.elements[5]=D*I+a*N+c*G;this.elements[6]=l*t+v*H+J*P;this.elements[7]=l*w+v*L+J*M;this.elements[8]=l*I+v*N+J*G;return this.trigger(Two.Events.change)},inverse:function(a){e=this.elements;a=a||new Two.Matrix;O=e[0];Q=e[1];$=e[2];ca=e[3];T=e[4];U=e[5];V=e[6];W=e[7];X=e[8];aa=X*T-U*W;ba=-X*ca+
U*V;Y=W*ca-T*V;R=O*aa+Q*ba+$*Y;if(!R)return null;R=1/R;a.elements[0]=aa*R;a.elements[1]=(-X*Q+$*W)*R;a.elements[2]=(U*Q-$*T)*R;a.elements[3]=ba*R;a.elements[4]=(X*O-$*V)*R;a.elements[5]=(-U*O+$*ca)*R;a.elements[6]=Y*R;a.elements[7]=(-W*O+Q*V)*R;a.elements[8]=(T*O-Q*ca)*R;return a},scale:function(a,b){x=arguments.length;1>=x&&(b=a);return this.multiply(a,0,0,0,b,0,0,0,1)},rotate:function(a){j=A(a);da=p(a);return this.multiply(j,-da,0,da,j,0,0,0,1)},translate:function(a,b){return this.multiply(1,0,
a,0,1,b,0,0,1)},skewX:function(a){e=g(a);return this.multiply(1,e,0,0,1,0,0,0,1)},skewY:function(a){e=g(a);return this.multiply(1,0,0,e,1,0,0,0,1)},toString:function(a){this.toArray(a,Z);return Z.join(" ")},toArray:function(a,b){d=this.elements;u=!!b;e=parseFloat(d[0].toFixed(3));m=parseFloat(d[1].toFixed(3));j=parseFloat(d[2].toFixed(3));h=parseFloat(d[3].toFixed(3));s=parseFloat(d[4].toFixed(3));f=parseFloat(d[5].toFixed(3));if(a){B=parseFloat(d[6].toFixed(3));F=parseFloat(d[7].toFixed(3));q=parseFloat(d[8].toFixed(3));
if(u){b[0]=e;b[1]=h;b[2]=B;b[3]=m;b[4]=s;b[5]=F;b[6]=j;b[7]=f;b[8]=q;return}return[e,h,B,m,s,F,j,f,q]}if(u)b[0]=e,b[1]=h,b[2]=m,b[3]=s,b[4]=j,b[5]=f;else return[e,h,m,s,j,f]},clone:function(){e=this.elements[0];m=this.elements[1];j=this.elements[2];h=this.elements[3];s=this.elements[4];f=this.elements[5];B=this.elements[6];F=this.elements[7];q=this.elements[8];return new Two.Matrix(e,m,j,h,s,f,B,F,q)}})})();(function(){var A=Two.Utils.mod,p,g,e,m={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",createElement:function(h,j){e=h;g=document.createElementNS(this.ns,e);"svg"===e&&(j=_.defaults(j||{},{version:this.version}));_.isObject(j)&&m.setAttributes(g,j);return g},setAttribute:function(e,g){this.setAttribute(g,e)},setAttributes:function(e,g){_.each(g,m.setAttribute,e);return this},removeAttribute:function(e,g){this.removeAttribute(g)},removeAttributes:function(e,g){_.each(g,
m.removeAttribute,e);return this},toString:function(e,g){var f=e.length,j=f-1,m;return _.map(e,function(q,p){var d,n=g?A(p-1,f):Math.max(p-1,0),C=g?A(p+1,f):Math.min(p+1,j);d=e[n];var y=e[C],r,z,E,n=q.x.toFixed(3),y=q.y.toFixed(3);switch(q._command){case Two.Commands.close:d=Two.Commands.close;break;case Two.Commands.curve:r=d.controls&&d.controls.right||d;E=q.controls&&q.controls.left||q;d._relative?(C=(r.x+d.x).toFixed(3),r=(r.y+d.y).toFixed(3)):(C=r.x.toFixed(3),r=r.y.toFixed(3));q._relative?(z=
(E.x+q.x).toFixed(3),E=(E.y+q.y).toFixed(3)):(z=E.x.toFixed(3),E=E.y.toFixed(3));d=(0===p?Two.Commands.move:Two.Commands.curve)+" "+C+" "+r+" "+z+" "+E+" "+n+" "+y;break;case Two.Commands.move:m=q;d=Two.Commands.move+" "+n+" "+y;break;default:d=q._command+" "+n+" "+y}p>=j&&g&&(q._command===Two.Commands.curve&&(y=m,r=q.controls&&q.controls.right||q,n=y.controls&&y.controls.left||y,q._relative?(C=(r.x+q.x).toFixed(3),r=(r.y+q.y).toFixed(3)):(C=r.x.toFixed(3),r=r.y.toFixed(3)),y._relative?(z=(n.x+y.x).toFixed(3),
E=(n.y+y.y).toFixed(3)):(z=n.x.toFixed(3),E=n.y.toFixed(3)),n=y.x.toFixed(3),y=y.y.toFixed(3),d+=" C "+C+" "+r+" "+z+" "+E+" "+n+" "+y),d+=" Z");return d}).join(" ")},group:{appendChild:function(e){(g=this.domElement.querySelector("#"+e))&&this.elem.appendChild(g)},removeChild:function(e){(g=this.domElement.querySelector("#"+e))&&this.elem.removeChild(g)},renderChild:function(e){m[e._renderer.type].render.call(e,this)},render:function(e){this._update();this._renderer.elem||(this._renderer.elem=m.createElement("g",
{id:this.id}),e.appendChild(this._renderer.elem));p=this._matrix.manual||this._flagMatrix;var g={domElement:e,elem:this._renderer.elem};p&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");_.each(this.children,m.group.renderChild,e);this._flagAdditions&&_.each(this.additions,m.group.appendChild,g);this._flagSubtractions&&_.each(this.subtractions,m.group.removeChild,g);return this.flagReset()}},polygon:{render:function(e){this._update();this._renderer.elem||(this._renderer.elem=
m.createElement("path",{id:this.id}),e.appendChild(this._renderer.elem));g=this._renderer.elem;(p=this._matrix.manual||this._flagMatrix)&&g.setAttribute("transform","matrix("+this._matrix.toString()+")");this._flagVertices&&(vertices=m.toString(this._vertices,this._closed),g.setAttribute("d",vertices));this._flagFill&&g.setAttribute("fill",this._fill);this._flagStroke&&g.setAttribute("stroke",this._stroke);this._flagLinewidth&&g.setAttribute("stroke-width",this._linewidth);this._flagOpacity&&(g.setAttribute("stroke-opacity",
this._opacity),g.setAttribute("fill-opacity",this._opacity));this._flagVisible&&g.setAttribute("visibility",this._visible?"visible":"hidden");this._flagCap&&g.setAttribute("stroke-linecap",this._cap);this._flagJoin&&g.setAttribute("stroke-linejoin",this._join);this._flagMiter&&g.setAttribute("stroke-miterlimit",this.miter);return this.flagReset()}}},j=Two[Two.Types.svg]=function(e){this.domElement=e.domElement||m.createElement("svg");this.scene=new Two.Group;this.scene.parent=this};_.extend(j,{Utils:m});
_.extend(j.prototype,Backbone.Events,{setSize:function(e,g){this.width=e;this.height=g;m.setAttributes(this.domElement,{width:e,height:g});return this},render:function(){m.group.render.call(this.scene,this.domElement);return this}})})();(function(){var A=Two.Utils.mod,p=Two.Utils.getRatio,g,e,m,j,h,s,f,B,F,q,u,d,n,C,y,r,z,E,D,a,c,l,v,J,t,w,I,H,L={group:{renderChild:function(a){L[a._renderer.type].render.call(a,this)},render:function(a){this._update();g=this._matrix.elements;a.save();a.transform(g[0],g[3],g[1],g[4],g[2],g[5]);_.each(this.children,L.group.renderChild,a);a.restore();return this.flagReset()}},polygon:{render:function(p){this._update();g=this._matrix.elements;e=this.stroke;m=this.linewidth;j=this.fill;h=this.opacity;
s=this.visible;f=this.cap;B=this.join;F=this.miter;q=this.closed;u=this._vertices;d=u.length;n=d-1;if(!s)return this;p.save();g&&p.transform(g[0],g[3],g[1],g[4],g[2],g[5]);j&&(p.fillStyle=j);e&&(p.strokeStyle=e);m&&(p.lineWidth=m);F&&(p.miterLimit=F);B&&(p.lineJoin=B);f&&(p.lineCap=f);_.isNumber(h)&&(p.globalAlpha=h);p.beginPath();_.each(u,function(e,f){I=e.x.toFixed(3);H=e.y.toFixed(3);switch(e._command){case Two.Commands.close:p.closePath();break;case Two.Commands.curve:y=q?A(f-1,d):Math.max(f-
1,0);C=q?A(f+1,d):Math.min(f+1,n);r=u[y];z=u[C];v=r.controls&&r.controls.right||r;J=e.controls&&e.controls.left||e;r._relative?(c=(v.x+r.x).toFixed(3),l=(v.y+r.y).toFixed(3)):(c=v.x.toFixed(3),l=v.y.toFixed(3));e._relative?(D=(J.x+e.x).toFixed(3),a=(J.y+e.y).toFixed(3)):(D=J.x.toFixed(3),a=J.y.toFixed(3));p.bezierCurveTo(c,l,D,a,I,H);f>=n&&q&&(z=E,t=e.controls&&e.controls.right||e,w=z.controls&&z.controls.left||z,e._relative?(c=(t.x+e.x).toFixed(3),l=(t.y+e.y).toFixed(3)):(c=t.x.toFixed(3),l=t.y.toFixed(3)),
z._relative?(D=(w.x+z.x).toFixed(3),a=(w.y+z.y).toFixed(3)):(D=w.x.toFixed(3),a=w.y.toFixed(3)),I=z.x.toFixed(3),H=z.y.toFixed(3),p.bezierCurveTo(c,l,D,a,I,H));break;case Two.Commands.line:p.lineTo(I,H);break;case Two.Commands.move:E=e,p.moveTo(I,H)}});q&&p.closePath();p.fill();p.stroke();p.restore();return this.flagReset()}}},N=Two[Two.Types.canvas]=function(a){this.domElement=a.domElement||document.createElement("canvas");this.ctx=this.domElement.getContext("2d");this.overdraw=a.overdraw||!1;this.scene=
new Two.Group;this.scene.parent=this};_.extend(N,{Utils:L});_.extend(N.prototype,Backbone.Events,{setSize:function(a,c,d){this.width=a;this.height=c;this.ratio=_.isUndefined(d)?p(this.ctx):d;this.domElement.width=a*this.ratio;this.domElement.height=c*this.ratio;_.extend(this.domElement.style,{width:a+"px",height:c+"px"});return this},render:function(){var a=1===this.ratio;a||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio));this.overdraw||this.ctx.clearRect(0,0,this.width,this.height);L.group.render.call(this.scene,
this.ctx);a||this.ctx.restore();return this}})})();(function(){var A=Two.Matrix.Multiply,p=Two.Utils.mod,g=[1,0,0,0,1,0,0,0,1],e=new Two.Array(9),m=Two.Utils.getRatio,j,h,s,f,B,F,q,u,d,n,C,y,r,z,E,D,a,c,l,v,J,t,w,I,H,L,N,P,M,G,b,k,x,da,O,Q,$,ca,T,U,V,W,X,aa,ba,Y,R,Z,ea,fa,K,ha,ia,ja,ga,S={canvas:document.createElement("canvas"),uv:new Two.Array([0,0,1,0,0,1,0,1,1,0,1,1]),group:{renderChild:function(a){S[a._renderer.type].render.call(a,this.gl,this.program)},render:function(a,b){this._update();j=this.parent;h=j._matrix&&j._matrix.manual||j._flagMatrix;
s=this._matrix.manual||this._flagMatrix;if(h||s)this._renderer.matrix||(this._renderer.matrix=new Two.Array(9)),this._matrix.toArray(!0,e),A(e,j._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*j._renderer.scale,h&&(this._flagMatrix=!0);_.each(this.children,S.group.renderChild,{gl:a,program:b});return this.flagReset()}},polygon:{render:function(a,b){if(!this._visible||!this._opacity)return this;j=this.parent;h=j._matrix.manual||j._flagMatrix;s=this._matrix.manual||this._flagMatrix;
f=this._flagVertices||this._flagFill||this._flagStroke||this._flagLinewidth||this._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale;this._update();if(h||s)this._renderer.matrix||(this._renderer.matrix=new Two.Array(9)),this._matrix.toArray(!0,e),A(e,j._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*j._renderer.scale;f&&(this._renderer.rect||(this._renderer.rect={}),this._renderer.triangles||(this._renderer.triangles=new Two.Array(12)),
S.getBoundingClientRect(this._vertices,this._linewidth,this._renderer.rect),S.getTriangles(this._renderer.rect,this._renderer.triangles),S.updateBuffer(a,this,b),S.updateTexture(a,this));a.bindBuffer(a.ARRAY_BUFFER,this._renderer.textureCoordsBuffer);a.vertexAttribPointer(b.textureCoords,2,a.FLOAT,!1,0,0);a.bindTexture(a.TEXTURE_2D,this._renderer.texture);a.uniformMatrix3fv(b.matrix,!1,this._renderer.matrix);a.bindBuffer(a.ARRAY_BUFFER,this._renderer.buffer);a.vertexAttribPointer(b.position,2,a.FLOAT,
!1,0,0);a.drawArrays(a.TRIANGLES,0,6);return this.flagReset()}},getBoundingClientRect:function(b,e,f){B=Infinity;F=-Infinity;q=Infinity;u=-Infinity;_.each(b,function(b){d=b.x;n=b.y;C;y;r;z;E=b.controls;q=Math.min(n,q);B=Math.min(d,B);F=Math.max(d,F);u=Math.max(n,u);b.controls&&(D=E.left,a=E.right,D&&a&&(C=b._relative?D.x+d:D.x,y=b._relative?D.y+n:D.y,r=b._relative?a.x+d:a.x,z=b._relative?a.y+n:a.y,C&&(y&&r&&z)&&(q=Math.min(y,z,q),B=Math.min(C,r,B),F=Math.max(C,r,F),u=Math.max(y,z,u))))});_.isNumber(e)&&
(q-=e,B-=e,F+=e,u+=e);c=F-B;l=u-q;f.top=q;f.left=B;f.right=F;f.bottom=u;f.width=c;f.height=l;f.centroid||(f.centroid={});f.centroid.x=-B;f.centroid.y=-q},getTriangles:function(a,b){q=a.top;B=a.left;F=a.right;u=a.bottom;b[0]=B;b[1]=q;b[2]=F;b[3]=q;b[4]=B;b[5]=u;b[6]=B;b[7]=u;b[8]=F;b[9]=q;b[10]=F;b[11]=u},updateCanvas:function(a){v=a._vertices;J=this.canvas;t=this.ctx;w=a._renderer.scale;I=a._stroke;H=a._linewidth*w;L=a._fill;N=a._opacity;P=a._cap;M=a._join;G=a._miter;b=a._closed;k=v.length;x=k-1;
J.width=Math.max(Math.ceil(a._renderer.rect.width*w),1);J.height=Math.max(Math.ceil(a._renderer.rect.height*w),1);da=a._renderer.rect.centroid;O=da.x*w;Q=da.y*w;t.clearRect(0,0,J.width,J.height);L&&(t.fillStyle=L);I&&(t.strokeStyle=I);H&&(t.lineWidth=H);G&&(t.miterLimit=G);M&&(t.lineJoin=M);P&&(t.lineCap=P);_.isNumber(N)&&(t.globalAlpha=N);t.beginPath();_.each(v,function(a,c){$;ca;C;r;T;U;V;W;X;aa;ba;D;d=(a.x*w+O).toFixed(3);n=(a.y*w+Q).toFixed(3);switch(a._command){case Two.Commands.close:t.closePath();
break;case Two.Commands.curve:ca=b?p(c-1,k):Math.max(c-1,0);$=b?p(c+1,k):Math.min(c+1,x);C=v[ca];r=v[$];X=C.controls&&C.controls.right||C;aa=a.controls&&a.controls.left||a;C._relative?(V=((X.x+C.x)*w+O).toFixed(3),W=((X.y+C.y)*w+Q).toFixed(3)):(V=(X.x*w+O).toFixed(3),W=(X.y*w+Q).toFixed(3));a._relative?(T=((aa.x+a.x)*w+O).toFixed(3),U=((aa.y+a.y)*w+Q).toFixed(3)):(T=(aa.x*w+O).toFixed(3),U=(aa.y*w+Q).toFixed(3));t.bezierCurveTo(V,W,T,U,d,n);c>=x&&b&&(r=z,ba=a.controls&&a.controls.right||a,D=r.controls&&
r.controls.left||r,a._relative?(V=((ba.x+a.x)*w+O).toFixed(3),W=((ba.y+a.y)*w+Q).toFixed(3)):(V=(ba.x*w+O).toFixed(3),W=(ba.y*w+Q).toFixed(3)),r._relative?(T=((D.x+r.x)*w+O).toFixed(3),U=((D.y+r.y)*w+O).toFixed(3)):(T=(D.x*w+O).toFixed(3),U=(D.y*w+Q).toFixed(3)),d=(r.x*w+O).toFixed(3),n=(r.y*w+Q).toFixed(3),t.bezierCurveTo(V,W,T,U,d,n));break;case Two.Commands.line:t.lineTo(d,n);break;case Two.Commands.move:z=a,t.moveTo(d,n)}});b&&t.closePath();t.fill();t.stroke()},updateTexture:function(a,b){this.updateCanvas(b);
b._renderer.texture&&a.deleteTexture(b._renderer.texture);a.bindBuffer(a.ARRAY_BUFFER,b._renderer.textureCoordsBuffer);b._renderer.texture=a.createTexture();a.bindTexture(a.TEXTURE_2D,b._renderer.texture);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);0>=this.canvas.width||0>=this.canvas.height||a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.canvas)},
updateBuffer:function(a,b,c){_.isObject(b._renderer.buffer)&&a.deleteBuffer(b._renderer.buffer);b._renderer.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,b._renderer.buffer);a.enableVertexAttribArray(c.position);a.bufferData(a.ARRAY_BUFFER,b._renderer.triangles,a.STATIC_DRAW);_.isObject(b._renderer.textureCoordsBuffer)&&a.deleteBuffer(b._renderer.textureCoordsBuffer);b._renderer.textureCoordsBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,b._renderer.textureCoordsBuffer);a.enableVertexAttribArray(c.textureCoords);
a.bufferData(a.ARRAY_BUFFER,this.uv,a.STATIC_DRAW)},program:{create:function(a,b){Y=a.createProgram();_.each(b,function(b){a.attachShader(Y,b)});a.linkProgram(Y);R=a.getProgramParameter(Y,a.LINK_STATUS);if(!R)throw fa=a.getProgramInfoLog(Y),a.deleteProgram(Y),new Two.Utils.Error("unable to link program: "+fa);return Y}},shaders:{create:function(a,b,c){Z=a.createShader(a[c]);a.shaderSource(Z,b);a.compileShader(Z);ea=a.getShaderParameter(Z,a.COMPILE_STATUS);if(!ea)throw fa=a.getShaderInfoLog(Z),a.deleteShader(Z),
new Two.Utils.Error("unable to compile shader "+Z+": "+fa);return Z},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:"attribute vec2 a_position;\nattribute vec2 a_textureCoords;\n\nuniform mat3 u_matrix;\nuniform vec2 u_resolution;\n\nvarying vec2 v_textureCoords;\n\nvoid main() {\n   vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;\n   vec2 normal = projected / u_resolution;\n   vec2 clipspace = (normal * 2.0) - 1.0;\n\n   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n   v_textureCoords = a_textureCoords;\n}",
fragment:"precision mediump float;\n\nuniform sampler2D u_image;\nvarying vec2 v_textureCoords;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_textureCoords);\n}"}};S.ctx=S.canvas.getContext("2d");var ka=Two[Two.Types.webgl]=function(a){this.domElement=a.domElement||document.createElement("canvas");this.scene=new Two.Group;this.scene.parent=this;this._renderer={matrix:new Two.Array(g),scale:1};this._flagMatrix=!0;ga=_.defaults(a||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,
preserveDrawingBuffer:!0,overdraw:!1});this.overdraw=ga.overdraw;K=this.ctx=this.domElement.getContext("webgl",ga)||this.domElement.getContext("experimental-webgl",ga);if(!this.ctx)throw new Two.Utils.Error("unable to create a webgl context. Try using another renderer.");ja=S.shaders.create(K,S.shaders.vertex,S.shaders.types.vertex);ia=S.shaders.create(K,S.shaders.fragment,S.shaders.types.fragment);this.program=S.program.create(K,[ja,ia]);K.useProgram(this.program);this.program.position=K.getAttribLocation(this.program,
"a_position");this.program.matrix=K.getUniformLocation(this.program,"u_matrix");this.program.textureCoords=K.getAttribLocation(this.program,"a_textureCoords");K.disable(K.DEPTH_TEST);K.enable(K.BLEND);K.blendEquationSeparate(K.FUNC_ADD,K.FUNC_ADD);K.blendFuncSeparate(K.SRC_ALPHA,K.ONE_MINUS_SRC_ALPHA,K.ONE,K.ONE_MINUS_SRC_ALPHA)};_.extend(ka.prototype,Backbone.Events,{setSize:function(a,b,c){this.width=a;this.height=b;this.ratio=_.isUndefined(c)?m(this.ctx):c;this.domElement.width=a*this.ratio;this.domElement.height=
b*this.ratio;_.extend(this.domElement.style,{width:a+"px",height:b+"px"});a*=this.ratio;b*=this.ratio;this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio;this._flagMatrix=!0;this.ctx.viewport(0,0,a,b);ha=this.ctx.getUniformLocation(this.program,"u_resolution");this.ctx.uniform2f(ha,a,b);return this},render:function(){K=this.ctx;this.overdraw||K.clear(K.COLOR_BUFFER_BIT|K.DEPTH_BUFFER_BIT);S.group.render.call(this.scene,K,this.program);this._flagMatrix=!1;return this}})})();(function(){var A,p=Two.Shape=function(){this._renderer={};this.id=Two.Identifier+Two.uniqueId();this._matrix=new Two.Matrix;this.translation=new Two.Vector;this.translation.bind(Two.Events.change,_.bind(p.FlagMatrix,this));this.rotation=0;this.scale=1};_.extend(p,Backbone.Events,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(g){Object.defineProperty(g,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation=e;this._flagMatrix=!0}});Object.defineProperty(g,
"scale",{get:function(){return this._scale},set:function(e){this._scale=e;this._flagScale=this._flagMatrix=!0}})}});_.extend(p.prototype,{_flagMatrix:!0,_rotation:0,_scale:1,addTo:function(g){g.add(this);return this},clone:function(){A=new p;A.translation.copy(this.translation);A.rotation=this.rotation;A.scale=this.scale;_.each(p.Properties,function(g){A[g]=this[g]},this);return A._update()},_update:function(){!this._matrix.manual&&this._flagMatrix&&this._matrix.identity().translate(this.translation.x,
this.translation.y).scale(this.scale).rotate(this.rotation);this.parent&&_.isFunction(this.parent._update)&&this.parent._update();return this},flagReset:function(){this._flagScale=this._flagMatrix=!1;return this}});p.MakeObservable(p.prototype)})();(function(){function A(a,b,c){r=b.controls&&b.controls.right;y=a.controls&&a.controls.left;J=b.x;t=b.y;w=(r||b).x;I=(r||b).y;H=(y||a).x;L=(y||a).y;N=a.x;P=a.y;r&&b._relative&&(w+=b.x,I+=b.y);y&&a._relative&&(H+=a.x,L+=a.y);return Two.Utils.subdivide(J,t,w,I,H,L,N,P,c)}var p=Math.min,g=Math.max,e=Math.round,m=Two.Utils.getComputedMatrix,j,h,s,f,B,F,q,u,d,n,C,y,r,z,E,D,a,c,l,v,J,t,w,I,H,L,N,P;_.each(Two.Commands,function(){});var M=Two.Polygon=function(a,b,c,d){Two.Shape.call(this);this._renderer.type=
"polygon";this._closed=!!b;this._curved=!!c;this.beginning=0;this.ending=1;this.fill="#fff";this.stroke="#000";this.opacity=this.linewidth=1;this.visible=!0;this.cap="butt";this.join="miter";this.miter=4;this._vertices=[];this.vertices=a;this.automatic=!d};_.extend(M,{Properties:"fill stroke linewidth opacity visible cap join miter closed curved automatic beginning ending".split(" "),FlagVertices:function(){this._flagVertices=!0},MakeObservable:function(a){Two.Shape.MakeObservable(a);_.each(M.Properties.slice(0,
8),function(b){var c="_"+b,d="_flag"+b.charAt(0).toUpperCase()+b.slice(1);Object.defineProperty(a,b,{get:function(){return this[c]},set:function(a){this[c]=a;this[d]=!0}})});Object.defineProperty(a,"closed",{get:function(){return this._closed},set:function(a){this._closed=!!a;this._flagVertices=!0}});Object.defineProperty(a,"curved",{get:function(){return this._curved},set:function(a){this._curved=!!a;this._flagVertices=!0}});Object.defineProperty(M.prototype,"automatic",{get:function(){return this._automatic},
set:function(a){a!==this._automatic&&(method=(this._automatic=!!a)?"ignore":"listen",_.each(this.vertices,function(a){a[method]()}))}});Object.defineProperty(a,"beginning",{get:function(){return this._beginning},set:function(a){this._beginning=p(g(a,0),this._ending);this._flagVertices=!0}});Object.defineProperty(a,"ending",{get:function(){return this._ending},set:function(a){this._ending=p(g(a,this._beginning),1);this._flagVertices=!0}});Object.defineProperty(a,"vertices",{get:function(){return this._collection},
set:function(a){var c=_.bind(M.FlagVertices,this),d=_.bind(function(a){_.each(a,function(a){a.bind(Two.Events.change,c)},this);c()},this),e=_.bind(function(a){_.each(a,function(a){a.unbind(Two.Events.change,c)},this);c()},this);this._collection&&this._collection.unbind();this._collection=new Two.Utils.Collection(a.slice(0));this._collection.bind(Two.Events.insert,d);this._collection.bind(Two.Events.remove,e);verticesChanged=!0;d(this._collection)}})}});_.extend(M.prototype,Two.Shape.prototype,{_flagVertices:!0,
_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,clone:function(a){a=a||this.parent;u=_.map(this.vertices,function(a){return a.clone()});d=new M(u,this.closed,this.curved,!this.automatic);_.each(Two.Shape.Properties,function(a){d[a]=this[a]},this);d.translation.copy(this.translation);
d.rotation=this.rotation;d.scale=this.scale;a.add(d);return d},toObject:function(){var a={vertices:_.map(this.vertices,function(a){return a.toObject()})};_.each(Two.Shape.Properties,function(b){a[b]=this[b]},this);a.translation=this.translation.toObject;a.rotation=this.rotation;a.scale=this.scale;return a},noFill:function(){this.fill="transparent";return this},noStroke:function(){this.stroke="transparent";return this},corner:function(){n=this.getBoundingClientRect(!0);n.centroid={x:n.left+n.width/
2,y:n.top+n.height/2};_.each(this.vertices,function(a){a.addSelf(n.centroid)});return this},center:function(){n=this.getBoundingClientRect(!0);n.centroid={x:n.left+n.width/2,y:n.top+n.height/2};_.each(this.vertices,function(a){a.subSelf(n.centroid)});return this},remove:function(){if(!this.parent)return this;this.parent.remove(this);return this},getBoundingClientRect:function(c){this._update();v=c?this._matrix:m(this);C=this.linewidth/2;void 0;y=Infinity;r=-Infinity;z=Infinity;E=-Infinity;_.each(this._vertices,
function(b){D=b.x;a=b.y;b=v.multiply(D,a,1);z=p(b.y-C,z);y=p(b.x-C,y);r=g(b.x+C,r);E=g(b.y+C,E)});return{top:z,left:y,right:r,bottom:E,width:r-y,height:E-z}},plot:function(){if(this.curved)return Two.Utils.getCurveFromPoints(this._vertices,this.closed),this;_.each(this._vertices,function(a,b){a._command=0===b?Two.Commands.move:Two.Commands.line},this);return this},subdivide:function(a){this._update();f=this.vertices.length-1;c=this.vertices[f];B=this._closed||this.vertices[f]._command===Two.Commands.close;
u=[];_.each(this.vertices,function(b,d){if(0>=d&&!B)c=b;else if(b.command===Two.Commands.move)u.push(new Two.Anchor(c.x,c.y)),0<d&&(u[u.length-1].command=Two.Commands.line),c=l=b;else{var e=A(b,c,a);u=u.concat(e);_.each(e,function(a,b){a.command=0>=b&&c.command===Two.Commands.move?Two.Commands.move:Two.Commands.line});d>=f&&(this._closed&&this._automatic?(c=b,b=l,e=A(b,c,a),u=u.concat(e),_.each(e,function(a,b){a.command=0>=b&&c.command===Two.Commands.move?Two.Commands.move:Two.Commands.line})):B&&
u.push(new Two.Anchor(b.x,b.y)),u[u.length-1].command=B?Two.Commands.close:Two.Commands.line);c=b}},this);this._curved=this._automatic=!1;this.vertices=u;return this},_update:function(){if(this._flagVertices){j=this.vertices.length;f=j-1;h=e(this._beginning*f);s=e(this._ending*f);this._vertices.length=0;for(q=h;q<s+1;q++)F=this.vertices[q],this._vertices.push(F);this._automatic&&this.plot()}Two.Shape.prototype._update.call(this);return this},flagReset:function(){this._flagVertices=this._flagFill=
this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=!1;Two.Shape.prototype.flagReset.call(this);return this}});M.MakeObservable(M.prototype)})();(function(){var A=Math.min,p=Math.max,g,e,m,j,h,s,f,B,F,q,u,d=Two.Group=function(){Two.Shape.call(this,!0);this._renderer.type="group";this.additions=[];this.subtractions=[];this.children={}};_.extend(d,{MakeObservable:function(e){Two.Shape.MakeObservable(e);d.MakeGetterSetters(e,Two.Polygon.Properties)},MakeGetterSetters:function(e,f){_.isArray(f)||(f=[f]);_.each(f,function(f){d.MakeGetterSetter(e,f)})},MakeGetterSetter:function(d,e){var f="_"+e;Object.defineProperty(d,e,{get:function(){return this[f]},
set:function(d){this[f]=d;_.each(this.children,function(f){f[e]=d})}})}});_.extend(d.prototype,Two.Shape.prototype,{_flagAdditions:!1,_flagSubtractions:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,clone:function(f){f=f||this.parent;m=new d;f.add(m);e=_.map(this.children,function(d){return d.clone(m)});m.translation.copy(this.translation);m.rotation=this.rotation;m.scale=this.scale;
return m},toObject:function(){var d={children:{},translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};_.each(this.children,function(e,f){d.children[f]=e.toObject()},this);return d},corner:function(){j=this.getBoundingClientRect(!0);h={x:j.left,y:j.top};_.each(this.children,function(d){d.translation.subSelf(h)});return this},center:function(){j=this.getBoundingClientRect(!0);j.centroid={x:j.left+j.width/2,y:j.top+j.height/2};_.each(this.children,function(d){d.translation.subSelf(j.centroid)});
return this},add:function(d){s=arguments.length;f=d;e=this.children;B=this.parent;F=this.additions;_.isArray(d)||(f=_.toArray(arguments));_.each(f,function(d){d&&(q=d.id,g=d.parent,_.isUndefined(e[q])&&(g&&(delete g.children[q],u=_.indexOf(g.additions,q),0<=u&&g.additions.splice(u,1)),e[q]=d,d.parent=this,F.push(q),this._flagAdditions=!0))},this);return this},remove:function(d){s=arguments.length;f=d;e=this.children;B=this.parent;F=this.subtractions;if(0>=s&&B)return B.remove(this),this;_.isArray(d)||
(f=_.toArray(arguments));_.each(f,function(d){q=d.id;grandchildren=d.children;g=d.parent;q in e&&(delete e[q],delete d.parent,u=_.indexOf(g.additions,q),0<=u&&g.additions.splice(u,1),F.push(q),this._flagSubtractions=!0)},this);return this},getBoundingClientRect:function(){this._update();var d=Infinity,e=-Infinity,f=Infinity,g=-Infinity;_.each(this.children,function(h){j=h.getBoundingClientRect();_.isNumber(j.top)&&(_.isNumber(j.left)&&_.isNumber(j.right)&&_.isNumber(j.bottom))&&(f=A(j.top,f),d=A(j.left,
d),e=p(j.right,e),g=p(j.bottom,g))},this);return{top:f,left:d,right:e,bottom:g,width:e-d,height:g-f}},noFill:function(){_.each(this.children,function(d){d.noFill()});return this},noStroke:function(){_.each(this.children,function(d){d.noStroke()});return this},subdivide:function(){var d=arguments;_.each(this.children,function(e){e.subdivide.apply(e,d)});return this},flagReset:function(){this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1);this._flagSubtractions&&(this.subtractions.length=
0,this._flagSubtractions=!1);Two.Shape.prototype.flagReset.call(this);return this}});d.MakeObservable(d.prototype)})();
